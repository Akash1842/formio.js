<!-- start:readme.hbs -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
		<title>Custom Components</title>
		<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<link href="https://fonts.googleapis.com/css?family=PT+Mono" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="css/font-awesome.min.css">
		<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css">
		<link type="text/css" rel="stylesheet" href="css/prism.min.css">
		<link type="text/css" rel="stylesheet" href="css/template.min.css">
			<link type="text/css" rel="stylesheet" href="https://cdn.form.io/formiojs/formio.full.min.css">
		<script type="text/javascript">
			window.TEMPLATE_OPTIONS = {"includeDate":true,"dateFormat":"Do MMM YYYY","systemName":"Form.io JavaScript SDK","systemSummary":"JavaScript Powered forms with form builder.","systemLogo":"","systemColor":"","navMembers":[{"kind":"tutorial","title":"Documentation","summary":"How to get started with the Form.io Renderer and Builder.","memberof":"documentation"},{"kind":"tutorial","title":"Examples","summary":"A list of all examples.","memberof":"examples"},{"kind":"class","title":"API","summary":"All documented classes."},{"kind":"module","title":"Modules","summary":"All documented modules."},{"kind":"namespace","title":"Namespaces","summary":"All documented namespaces."}],"footer":"","copyright":"FooDoc Copyright Â© 2016 The contributors to the JSDoc3 and FooDoc projects.","linenums":true,"collapseSymbols":true,"inverseNav":false,"inlineNav":false,"outputSourceFiles":true,"sourceRootPath":null,"disablePackagePath":true,"outputSourcePath":false,"showTableOfContents":true,"showAccessFilter":true,"analytics":null,"methodHeadingReturns":true,"sort":"linenum, weight, longname, version, since","search":true,"favicon":null,"stylesheets":["https://cdn.form.io/formiojs/formio.full.min.css"],"scripts":["https://cdn.form.io/formiojs/formio.full.min.js"],"monospaceLinks":false,"cleverLinks":false};
			window.DOCLET_TOC_ENABLED = true;
			window.DOCLET_AFILTER_ENABLED = false;
		</script>
</head>
<body>
	<!-- start:navbar.hbs -->
	<nav class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
	  <div class="container">
	    <a class="navbar-brand" href="index.html">
	      Form.io JavaScript SDK
	    </a>
	    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
	      <span class="navbar-toggler-icon"></span>
	    </button>
	    <div class="navbar-collapse collapse" id="navbarSupportedContent">
	      <ul class="navbar-nav mr-auto">
	              <li class="nav-item dropdown">
	                <a href="#" class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Documentation<b class="caret"></b></a>
	                <div class="dropdown-menu">
	                  <a class="dropdown-item" href="documentation.html">Documentation</a>
	                  <div class="dropdown-divider"></div>
	                    <a class="dropdown-item" href="tutorial-howitworks.html">How it works</a>
	                    <a class="dropdown-item" href="tutorial-about.html">About this Library</a>
	                    <a class="dropdown-item" href="tutorial-installation.html">Installation</a>
	                    <a class="dropdown-item" href="tutorial-renderer.html">Form Renderer</a>
	                    <a class="dropdown-item" href="tutorial-builder.html">Form Builder</a>
	                    <a class="dropdown-item" href="tutorial-utils.html">Form Utilities</a>
	                    <a class="dropdown-item" href="tutorial-api.html">JavaScript API</a>
	                    <a class="dropdown-item" href="tutorial-frameworks.html">Frameworks (Angular, React, Vue, etc)</a>
	                    <a class="dropdown-item" href="tutorial-modules.html">Modules</a>
	                </div>
	              </li>
	              <li class="nav-item dropdown">
	                <a href="#" class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Examples<b class="caret"></b></a>
	                <div class="dropdown-menu">
	                  <a class="dropdown-item" href="examples.html">Examples</a>
	                  <div class="dropdown-divider"></div>
	                    <a class="dropdown-item" href="tutorial-hosted.html">Hosted Forms</a>
	                    <a class="dropdown-item" href="tutorial-simple.html">Simple Embedding</a>
	                    <a class="dropdown-item" href="tutorial-jsfiddle.html">JSFiddle Example</a>
	                    <a class="dropdown-item" href="tutorial-submissions.html">Submission Hosting</a>
	                    <a class="dropdown-item" href="tutorial-htmlview.html">Submission View</a>
	                    <a class="dropdown-item" href="tutorial-customendpoint.html">Submission Custom Endpoint</a>
	                    <a class="dropdown-item" href="tutorial-thankyou.html">Thank You Page</a>
	                    <a class="dropdown-item" href="tutorial-externalload.html">External Data Load</a>
	                    <a class="dropdown-item" href="tutorial-pdf.html">PDF Forms</a>
	                    <a class="dropdown-item" href="tutorial-customcomponent.html">Custom Components</a>
	                    <a class="dropdown-item" href="tutorial-conditionalwizard.html">Conditional Wizards</a>
	                    <a class="dropdown-item" href="tutorial-custombuilder.html">Custom Form Builder</a>
	                    <a class="dropdown-item" href="tutorial-customwizard.html">Custom Wizards</a>
	                    <a class="dropdown-item" href="tutorial-json.html">JSON Powered Forms</a>
	                    <a class="dropdown-item" href="tutorial-wizard.html">Wizards</a>
	                    <a class="dropdown-item" href="tutorial-wysiwyg.html">WYSIWYG Editor</a>
	                    <a class="dropdown-item" href="tutorial-embed.html">JavaScript Embedding</a>
	                    <a class="dropdown-item" href="tutorial-fieldLogic.html">Field Logic</a>
	                    <a class="dropdown-item" href="tutorial-savedraft.html">Save as Draft</a>
	                    <a class="dropdown-item" href="tutorial-multiframework.html">Multiple Framework Support</a>
	                    <a class="dropdown-item" href="tutorial-conditions.html">Conditional Forms</a>
	                    <a class="dropdown-item" href="tutorial-select.html">Select Dropdowns</a>
	                    <a class="dropdown-item" href="tutorial-datagrid.html">Data Grid Input</a>
	                    <a class="dropdown-item" href="tutorial-editgrid.html">Edit Grid</a>
	                    <a class="dropdown-item" href="tutorial-noeval.html">No Eval</a>
	                    <a class="dropdown-item" href="tutorial-datagrid2.html">Data Grid Panels</a>
	                    <a class="dropdown-item" href="tutorial-external.html">External Sources & Conditional Selects</a>
	                    <a class="dropdown-item" href="tutorial-contrib.html">Community Contributions</a>
	                    <a class="dropdown-item" href="tutorial-calculated.html">Calculated Values</a>
	                    <a class="dropdown-item" href="tutorial-language.html">Multi-Language Forms</a>
	                    <a class="dropdown-item" href="tutorial-kitchen.html">Kitchen Sink</a>
	                    <a class="dropdown-item" href="tutorial-recaptcha.html">reCAPTCHA component</a>
	                </div>
	              </li>
	              <li class="nav-item dropdown">
	                <a href="#" class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">API<b class="caret"></b></a>
	                <div class="dropdown-menu">
	                  <a class="dropdown-item" href="list_class.html">API</a>
	                  <div class="dropdown-divider"></div>
	                    <a href="Form.html" class="dropdown-item">Form</a>
	                    <a href="Formio.html" class="dropdown-item">Formio</a>
	                    <a href="FormioUtils.html" class="dropdown-item">FormioUtils</a>
	                </div>
	              </li>
	      </ul>
	    </div>
	  </div>
	</nav>
	<!-- end:navbar.hbs -->
		<div class="page-header">
			<div class="container">
				<h1><span class="title">Custom Components</span></h1>
			</div>
		</div>
	<div class="container-fluid content">
		<div class="row">
			<div class="col-md-9 main-content">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                <li class="breadcrumb-item "><a href="index.html">Home</a></li>
                <li class="breadcrumb-item "><a href="tutorial-examples_.html">Examples</a></li>
                <li class="breadcrumb-item active">Custom Components</li>
              </ol>
            </nav>
		<section class="tutorial-section">
			<article><p>The Form.io renderer allows for the creation of Custom components. These can be created by extending the base components within Form.io and then registering them within the core renderer. This can be done as follows.</p>
<pre class="prettyprint source lang-html"><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.form.io/formiojs/formio.full.min.css&quot;>
&lt;script src=&quot;https://cdn.form.io/formiojs/formio.full.min.js&quot;>&lt;/script>
&lt;script type=&quot;text/javascript&quot;>

/**
 * Get the input component class by referencing Formio.Components.components map.
 */
var InputComponent = Formio.Components.components.input;

/**
 * Create a new CheckMatrixComponent &quot;class&quot; using ES5 class inheritance notation. 
 * https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Inheritance
 * 
 * Here we will derive from the base component which all Form.io form components derive from.
 *
 * @param component
 * @param options
 * @param data
 * @constructor
 */
function CheckMatrixComponent(component, options, data) {
  InputComponent.prototype.constructor.call(this, component, options, data);
}

// Perform typical ES5 inheritance
CheckMatrixComponent.prototype = Object.create(InputComponent.prototype);
CheckMatrixComponent.prototype.constructor = CheckMatrixComponent;

/**
 * Define what the default JSON schema for this component is. We will derive from the InputComponent
 * schema and provide our overrides to that.
 * @return {*}
 */
CheckMatrixComponent.schema = function() {
  return InputComponent.schema({
    type: 'checkmatrix',
    numRows: 3,
    numCols: 3
  });
};

/**
 * Register this component to the Form Builder by providing the &quot;builderInfo&quot; object.
 * 
 * @type {{title: string, group: string, icon: string, weight: number, documentation: string, schema: *}}
 */
CheckMatrixComponent.builderInfo = {
  title: 'Check Matrix',
  group: 'basic',
  icon: 'fa fa-table',
  weight: 70,
  documentation: 'http://help.form.io/userguide/#table',
  schema: CheckMatrixComponent.schema()
};

/**
 *  Tell the renderer how to render this component.
 */
CheckMatrixComponent.prototype.render = function(element) {
  var tpl = '&lt;div class=&quot;table-responsive&quot;>';
  tpl += this.renderTemplate('label', {
    label: this.labelInfo,
    component: this.component,
    element: element,
    tooltip: this.interpolate(this.component.tooltip || '').replace(/(?:\r\n|\r|\n)/g, '&lt;br />'),
  });
  tpl += '&lt;table class=&quot;table&quot;>';
  tpl += '&lt;tbody>';
  for (let i = 0; i &lt; this.component.numRows; i++) {
    tpl += '&lt;tr>';
    for (let j = 0; j &lt; this.component.numCols; j++) {
      tpl += '&lt;td>';        
      tpl += this.renderTemplate('input', {
        input: {
          type: 'input',
          attr: {
            type: 'checkbox'
          },
          id: 'check-' + i + '-' + j
        }
      });
      tpl += '&lt;/td>';
    }
    tpl += '&lt;/tr>';
  }
  tpl += '&lt;/tbody>';
  tpl += '&lt;/table>';
  tpl += '&lt;/div>';
  return tpl;
};

/**
 * Provide the input element information. Because we are using checkboxes, the change event needs to be 
 * 'click' instead of the default 'change' from the InputComponent.
 * 
 * @return {{type, component, changeEvent, attr}}
 */
CheckMatrixComponent.prototype.elementInfo = function() {
  const info = InputComponent.prototype.elementInfo.call(this);
  info.changeEvent = 'click';
  return info;
};

/**
 * Tell the renderer how to &quot;get&quot; a value from this component.
 * 
 * @return {Array}
 */
CheckMatrixComponent.prototype.getValue = function() {
  var value = [];
  if (!this.refs.input || !this.refs.input.length) {
    return value;
  }
  for (let i = 0; i &lt; this.component.numRows; i++) {
    value[i] = [];
    for (let j = 0; j &lt; this.component.numCols; j++) {
      var index = (i * this.component.numCols) + j;
      if (this.refs.input[index]) {
        value[i][j] = !!this.refs.input[index].checked;
      }
    }
  }
  return value;
};

/**
 * Tell the renderer how to &quot;set&quot; the value of this component.
 * 
 * @param value
 * @return {boolean}
 */
CheckMatrixComponent.prototype.setValue = function(value) {
  var changed = InputComponent.prototype.updateValue.call(this, value);
  if (!value) {
    return changed;
  }
  for (let i = 0; i &lt; this.component.numRows; i++) {
    if (!value[i]) {
      break;
    }
    for (let j = 0; j &lt; this.component.numCols; j++) {
      if (!value[i][j]) {
        return false;
      }
      let checked = value[i][j] ? 1 : 0;
      var index = (i * this.component.numCols) + j;
      this.refs.input[index].value = checked;
      this.refs.input[index].checked = checked;
    }
  }
  return changed;
};

// Use the table component edit form.
CheckMatrixComponent.editForm = Formio.Components.components.table.editForm;

// Register the component to the Formio.Components registry.
Formio.Components.addComponent('checkmatrix', CheckMatrixComponent);

&lt;/script>
</code></pre>
<pre class="prettyprint source lang-html"><code>&lt;div class=&quot;card card-body bg-light&quot;>
  &lt;div id=&quot;builder&quot;>&lt;/div>
&lt;/div>
&lt;h4>Rendered Form&lt;/h4>
&lt;div class=&quot;card card-body bg-light&quot;>
  &lt;div id=&quot;formio&quot;>&lt;/div>
&lt;/div>
&lt;h4>Submission Data&lt;/h4>
&lt;div class=&quot;card card-body bg-light jsonviewer&quot;>
  &lt;pre id=&quot;json&quot;>&lt;/pre>
&lt;/div>
&lt;script type=&quot;text/javascript&quot;>
  Formio.builder(document.getElementById('builder'), {}, {
    builder: {
      basic: false,
      advanced: false,
      data: false,
      layout: false,
      customBasic: {
        title: 'Basic Components',
        default: true,
        weight: 0,
        components: {
          checkmatrix: true
        }
      }
    }
  }).then(function(builder) {
    Formio.createForm(document.getElementById('formio'), {}).then(function(instance) {
      var json = document.getElementById('json');
      instance.on('change', function() {
        json.innerHTML = '';
        json.appendChild(document.createTextNode(JSON.stringify(instance.submission, null, 4)));
      });
      builder.on('change', function(schema) {
        if (schema.components) {
          instance.form = schema;
        }
      });
    });
  });
&lt;/script>
</code></pre>
<h3>Result</h3>
<script type="text/javascript">
window.addEventListener('load', function() {
var InputComponent = Formio.Components.components.input;
<p>function CheckMatrixComponent(component, options, data) {
InputComponent.prototype.constructor.call(this, component, options, data);
}</p>
<p>CheckMatrixComponent.prototype = Object.create(InputComponent.prototype);
CheckMatrixComponent.prototype.constructor = CheckMatrixComponent;</p>
<p>CheckMatrixComponent.schema = function() {
return InputComponent.schema({
type: 'checkmatrix',
input: true,
persistent: true
});
};</p>
<p>CheckMatrixComponent.builderInfo = {
title: 'Check Matrix',
group: 'basic',
icon: 'fa fa-table',
weight: 70,
documentation: 'http://help.form.io/userguide/#table',
schema: CheckMatrixComponent.schema()
};</p>
<p>CheckMatrixComponent.prototype.render = function(element) {
var tpl = '<div class="table-responsive">';
tpl += this.renderTemplate('label', {
label: this.labelInfo,
component: this.component,
element: element,
tooltip: this.interpolate(this.component.tooltip || '').replace(/(?:\r\n|\r|\n)/g, '<br />'),
});
tpl += '<table class="table">';
tpl += '<tbody>';
for (let i = 0; i &lt; this.component.numRows; i++) {
tpl += '<tr>';
for (let j = 0; j &lt; this.component.numCols; j++) {
tpl += '<td>';<br>
tpl += this.renderTemplate('input', {
input: {
type: 'input',
attr: {
type: 'checkbox'
},
id: 'check-' + i + '-' + j
}
});
tpl += '</td>';
}
tpl += '</tr>';
}
tpl += '</tbody>';
tpl += '</table>';
tpl += '</div>';
return tpl;
};</p>
<p>CheckMatrixComponent.prototype.elementInfo = function() {
const info = InputComponent.prototype.elementInfo.call(this);
info.changeEvent = 'click';
return info;
};</p>
<p>CheckMatrixComponent.prototype.getValue = function() {
var value = [];
if (!this.refs.input || !this.refs.input.length) {
return value;
}
for (let i = 0; i &lt; this.component.numRows; i++) {
value[i] = [];
for (let j = 0; j &lt; this.component.numCols; j++) {
var index = (i * this.component.numCols) + j;
if (this.refs.input[index]) {
value[i][j] = !!this.refs.input[index].checked;
}
}
}
return value;
};</p>
<p>CheckMatrixComponent.prototype.setValue = function(value) {
var changed = InputComponent.prototype.updateValue.call(this, value);
if (!value) {
return changed;
}
for (let i = 0; i &lt; this.component.numRows; i++) {
if (!value[i]) {
break;
}
for (let j = 0; j &lt; this.component.numCols; j++) {
if (!value[i][j]) {
return false;
}
let checked = value[i][j] ? 1 : 0;
var index = (i * this.component.numCols) + j;
this.refs.input[index].value = checked;
this.refs.input[index].checked = checked;
}
}
return changed;
};</p>
<p>// Use the table component edit form.
CheckMatrixComponent.editForm = Formio.Components.components.table.editForm;
Formio.Components.addComponent('checkmatrix', CheckMatrixComponent);
});
</script></p>
<div class="card card-body bg-light">
<div id="builder"></div>
</div>
<h4>Rendered Form</h4>
<div class="card card-body bg-light">
  <div id="formio"></div>
</div>
<h4>Submission Data</h4>
<div class="card card-body bg-light jsonviewer">
  <pre id="json"></pre>
</div>
<script type="text/javascript">
window.addEventListener('load', function() {
Formio.builder(document.getElementById('builder'), {}, {
  builder: {
    basic: false,
    advanced: false,
    data: false,
    layout: false,
    customBasic: {
      title: 'Basic Components',
      default: true,
      weight: 0,
      components: {
        checkmatrix: true
      }
    }
  }
}).then(function(builder) {
  Formio.createForm(document.getElementById('formio'), {}).then(function(instance) {
    var json = document.getElementById('json');
    instance.on('change', function() {
      json.innerHTML = '';
      json.appendChild(document.createTextNode(JSON.stringify(instance.submission, null, 4)));
    });
    builder.on('change', function(schema) {
      if (schema.components) {
        instance.form = schema;
      }
    });
  });
});
});
</script></article>
		</section>
			</div>
				<div class="col-md-3 side-content">
					<nav class="toc hidden-print hidden-sm hidden-xs"></nav>
				</div>
		</div>
	</div>
	<footer>
				<div class="copyright">FooDoc Copyright Â© 2016 The contributors to the JSDoc3 and FooDoc projects.</div>
			<div class="generated-by">Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on 1st Mar 2020 using the <a href="https://github.com/steveush/foodoc">FooDoc template</a>.</div>
	</footer>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/clipboard.min.js"></script>
	<script src="js/prism.min.js"></script>
	<script src="js/template.min.js"></script>
		<!-- start:lunr-search-modal.hbs -->
		<div class="modal fade" id="lunr-search-modal">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">Search results</h4>
					</div>
					<div class="modal-body" id="lunr-search-body">
					</div>
					<div class="modal-footer" id="lunr-search-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div>
		<!-- end:lunr-search-modal.hbs -->		<script src="js/lunr.min.js"></script>
		<script src="https://cdn.form.io/formiojs/formio.full.min.js"></script>
	
</body>
</html>
<!-- end:readme.hbs -->